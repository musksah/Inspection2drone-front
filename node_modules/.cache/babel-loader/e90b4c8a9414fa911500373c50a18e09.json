{"remainingRequest":"/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/node_modules/thread-loader/dist/cjs.js!/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/node_modules/babel-loader/lib/index.js!/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/src/main.js","dependencies":[{"path":"/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/src/main.js","mtime":1588699451470},{"path":"/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["/*!\n\n =========================================================\n * Vue Paper Dashboard - v2.0.0\n =========================================================\n\n * Product Page: http://www.creative-tim.com/product/paper-dashboard\n * Copyright 2019 Creative Tim (http://www.creative-tim.com)\n * Licensed under MIT (https://github.com/creativetimofficial/paper-dashboard/blob/master/LICENSE.md)\n\n =========================================================\n\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n */\nimport Vue from \"vue\";\nimport App from \"./App\";\nimport router from \"./router/index\";\nimport PaperDashboard from \"./plugins/paperDashboard\";\nimport \"vue-notifyjs/themes/default.css\";\nimport { BootstrapVue, IconsPlugin, CarouselPlugin } from 'bootstrap-vue';\nimport VueSession from 'vue-session';\nimport Vuetify from 'vuetify';\nimport 'vuetify/dist/vuetify.min.css';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport jwt_decode from 'jwt-decode';\nimport Vuex from 'vuex'; // Se importan las tablas a usar\n// import DataTables and DataTablesServer together\n\nVue.use(Vuex);\nVue.use(VueAxios, axios);\nconst store = new Vuex.Store({\n  state: {\n    jwt: localStorage.getItem('t'),\n    username: localStorage.getItem('username'),\n    endpoints: {\n      obtainJWT: 'http://127.0.0.1:8000/api/v1.0/auth/obtain_token/',\n      refreshJWT: 'http://127.0.0.1:8000/api/v1.0/auth/refresh_token/'\n    },\n    permissions: localStorage.getItem('permissions'),\n    modules: localStorage.getItem('modules'),\n    info_modules: {\n      'view_dashboard': {\n        name: \"Dashboard\",\n        route: \"dashboard\",\n        icon: \"ti-dashboard\"\n      },\n      'view_dashboard': {\n        name: \"Dashboard\",\n        route: \"dashboard\",\n        icon: \"ti-dashboard\"\n      },\n      'view_user': {\n        name: \"Users\",\n        route: \"users\",\n        icon: \"ti-user\"\n      },\n      'view_inspection': {\n        name: \"Inspecciones\",\n        route: \"inspection\",\n        icon: \"ti-calendar\"\n      },\n      'view_company': {\n        name: \"Compañías\",\n        route: \"company\",\n        icon: \"ti-briefcase\"\n      },\n      'view_plan': {\n        name: \"Planes\",\n        route: \"plans\",\n        icon: \"ti-notepad\"\n      },\n      'view_image': {\n        name: \"Galería\",\n        route: \"gallery\",\n        icon: \"ti-gallery\"\n      },\n      'add_image': {\n        name: \"Cargar Imágenes\",\n        route: \"upload-photo\",\n        icon: \"ti-gallery\"\n      },\n      'view_pilot': {\n        name: \"Pilotos\",\n        route: \"pilot\",\n        icon: \"ti-id-badge\"\n      },\n      'view_profile': {\n        name: \"profile\",\n        route: \"profile\",\n        icon: \"ti-id-badge\"\n      },\n      'view_drone': {\n        name: \"Drones\",\n        route: \"drones\",\n        icon: \"ti-vector\"\n      },\n      'view_analysis': {\n        name: \"Análisis\",\n        route: \"analysis\",\n        icon: \"ti-briefcase\"\n      }\n    }\n  },\n  getters: {\n    getBaseInstanceAxios: state => {\n      return {\n        baseURL: \"http://127.0.0.1:8000/api/v1.0/\",\n        headers: {\n          Authorization: `JWT ${state.jwt}`,\n          \"Content-Type\": \"application/json\"\n        },\n        xhrFields: {\n          withCredentials: true\n        }\n      };\n    },\n    getModules: state => {\n      let modules_new = [];\n      JSON.parse(state.modules).forEach(element => {\n        console.log(element);\n\n        if (state.info_modules.hasOwnProperty(element)) {\n          modules_new.push(state.info_modules[element]);\n        }\n      });\n      return modules_new;\n    }\n  },\n  mutations: {\n    updateToken(state, newToken) {\n      localStorage.setItem('t', newToken);\n      state.jwt = newToken;\n    },\n\n    removeToken(state) {\n      localStorage.removeItem('t');\n      state.jwt = null;\n    },\n\n    updateUsername(state, username) {\n      localStorage.setItem('username', username);\n      state.username = username;\n    },\n\n    storePermissions(state, permissions) {\n      state.permissions = [];\n      let arr_modules = [];\n      permissions.forEach(element => {\n        state.permissions.push(element.fields.codename);\n      });\n      localStorage.setItem('permissions', JSON.stringify(state.permissions));\n      arr_modules = state.permissions.filter(function (perm) {\n        return perm.includes(\"view\") || perm.includes(\"add\");\n      });\n      state.modules = JSON.stringify(arr_modules);\n      localStorage.setItem('modules', JSON.stringify(arr_modules));\n    }\n\n  },\n  actions: {\n    obtainToken(context, credentials) {\n      const payload = {\n        username: credentials.username,\n        password: credentials.password\n      };\n      return axios.post(this.state.endpoints.obtainJWT, payload);\n    },\n\n    refreshToken() {\n      const payload = {\n        token: this.state.jwt\n      };\n      axios.post(this.state.endpoints.refreshJWT, payload).then(response => {\n        this.commit('updateToken', response.data.token);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    inspectToken() {\n      // WE WILL ADD THIS LATER\n      const token = this.state.jwt;\n\n      if (token) {\n        const decoded = jwt_decode(token);\n        const exp = decoded.exp;\n        const orig_iat = decode.orig_iat;\n\n        if (exp - Date.now() / 1000 < 1800 && Date.now() / 1000 - orig_iat < 628200) {\n          this.dispatch('refreshToken');\n        } else if (exp - Date.now() / 1000 < 1800) {// DO NOTHING, DO NOT REFRESH          \n        } else {// PROMPT USER TO RE-LOGIN, THIS ELSE CLAUSE COVERS THE CONDITION WHERE A TOKEN IS EXPIRED AS WELL\n          }\n      }\n    } // WE WILL ADD THIS LATER\n\n\n  }\n}); // CommonJS\n\nVue.use(PaperDashboard); // Install BootstrapVue\n\nVue.use(BootstrapVue); // Optionally install the BootstrapVue icon components plugin\n\nVue.use(IconsPlugin);\nVue.use(CarouselPlugin);\nVue.use(Vuetify);\nVue.use(VueSession);\n/* eslint-disable no-new */\n\nnew Vue({\n  router,\n  render: h => h(App),\n  store: store\n}).$mount(\"#app\");",{"version":3,"sources":["/home/sebastian/Documentos/inspection2drone/DjInspection2drone/front/src/main.js"],"names":["Vue","App","router","PaperDashboard","BootstrapVue","IconsPlugin","CarouselPlugin","VueSession","Vuetify","axios","VueAxios","jwt_decode","Vuex","use","store","Store","state","jwt","localStorage","getItem","username","endpoints","obtainJWT","refreshJWT","permissions","modules","info_modules","name","route","icon","getters","getBaseInstanceAxios","baseURL","headers","Authorization","xhrFields","withCredentials","getModules","modules_new","JSON","parse","forEach","element","console","log","hasOwnProperty","push","mutations","updateToken","newToken","setItem","removeToken","removeItem","updateUsername","storePermissions","arr_modules","fields","codename","stringify","filter","perm","includes","actions","obtainToken","context","credentials","payload","password","post","refreshToken","token","then","response","commit","data","catch","error","inspectToken","decoded","exp","orig_iat","decode","Date","now","dispatch","render","h","$mount"],"mappings":"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","sourcesContent":["/*!\n\n =========================================================\n * Vue Paper Dashboard - v2.0.0\n =========================================================\n\n * Product Page: http://www.creative-tim.com/product/paper-dashboard\n * Copyright 2019 Creative Tim (http://www.creative-tim.com)\n * Licensed under MIT (https://github.com/creativetimofficial/paper-dashboard/blob/master/LICENSE.md)\n\n =========================================================\n\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n */\nimport Vue from \"vue\";\nimport App from \"./App\";\nimport router from \"./router/index\";\n\nimport PaperDashboard from \"./plugins/paperDashboard\";\nimport \"vue-notifyjs/themes/default.css\";\nimport { BootstrapVue, IconsPlugin, CarouselPlugin } from 'bootstrap-vue';\nimport VueSession from 'vue-session';\nimport Vuetify from 'vuetify';\nimport 'vuetify/dist/vuetify.min.css';\n\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\nimport jwt_decode from 'jwt-decode'\nimport Vuex from 'vuex'\n// Se importan las tablas a usar\n// import DataTables and DataTablesServer together\n\nVue.use(Vuex);\nVue.use(VueAxios, axios);\n\nconst store = new Vuex.Store({\n  state: {\n    jwt: localStorage.getItem('t'),\n    username:localStorage.getItem('username'),\n    endpoints: {\n      obtainJWT: 'http://127.0.0.1:8000/api/v1.0/auth/obtain_token/',\n      refreshJWT: 'http://127.0.0.1:8000/api/v1.0/auth/refresh_token/'\n    },\n    permissions:localStorage.getItem('permissions'),\n    modules:localStorage.getItem('modules'),\n    info_modules:{\n      'view_dashboard':{\n        name:\"Dashboard\",\n        route:\"dashboard\",\n        icon:\"ti-dashboard\"\n      },\n      'view_dashboard':{\n        name:\"Dashboard\",\n        route:\"dashboard\",\n        icon:\"ti-dashboard\"\n      },\n      'view_user':{\n        name:\"Users\",\n        route:\"users\",\n        icon:\"ti-user\"\n      },\n      'view_inspection':{\n        name:\"Inspecciones\",\n        route:\"inspection\",\n        icon:\"ti-calendar\"\n      },\n      'view_company':{\n        name:\"Compañías\",\n        route:\"company\",\n        icon:\"ti-briefcase\"\n      },\n      'view_plan':{\n        name:\"Planes\",\n        route:\"plans\",\n        icon:\"ti-notepad\"\n      },\n      'view_image':{\n        name:\"Galería\",\n        route:\"gallery\",\n        icon:\"ti-gallery\"\n      },\n      'add_image':{\n        name:\"Cargar Imágenes\",\n        route:\"upload-photo\",\n        icon:\"ti-gallery\"\n      },\n      'view_pilot':{\n        name:\"Pilotos\",\n        route:\"pilot\",\n        icon:\"ti-id-badge\"\n      },\n      'view_profile':{\n        name:\"profile\",\n        route:\"profile\",\n        icon:\"ti-id-badge\"\n      },\n      'view_drone':{\n        name:\"Drones\",\n        route:\"drones\",\n        icon:\"ti-vector\"\n      },\n      'view_analysis':{\n        name:\"Análisis\",\n        route:\"analysis\",\n        icon:\"ti-briefcase\"\n      },\n    }\n  },\n  getters:{\n    getBaseInstanceAxios: state =>{\n      return  {\n        baseURL: \"http://127.0.0.1:8000/api/v1.0/\",\n        headers: {\n          Authorization: `JWT ${state.jwt}`,\n          \"Content-Type\": \"application/json\"\n        },\n        xhrFields: {\n          withCredentials: true\n        }\n      };\n    }, \n    getModules: state =>{\n      let modules_new = []\n      JSON.parse(state.modules).forEach(element => {\n        console.log(element);\n        if(state.info_modules.hasOwnProperty(element)){\n          modules_new.push(state.info_modules[element]);\n        }\n      });\n      return modules_new;\n    }\n  },\n  mutations: {\n    updateToken(state, newToken) {\n      localStorage.setItem('t', newToken);\n      state.jwt = newToken;\n    },\n    removeToken(state) {\n      localStorage.removeItem('t');\n      state.jwt = null;\n    },\n    updateUsername(state, username){\n      localStorage.setItem('username',username);\n      state.username = username;\n    },\n    storePermissions(state, permissions){\n      state.permissions = []\n      let arr_modules = []\n      permissions.forEach(element => {\n        state.permissions.push(element.fields.codename)\n      });\n      localStorage.setItem('permissions',JSON.stringify(state.permissions))\n      arr_modules = state.permissions.filter(function(perm){\n        return perm.includes(\"view\") || perm.includes(\"add\"); \n      });\n      state.modules = JSON.stringify(arr_modules);\n      localStorage.setItem('modules',JSON.stringify(arr_modules));\n    }\n  },\n  actions: {\n    obtainToken(context, credentials) {\n      const payload = {\n        username: credentials.username,\n        password: credentials.password\n      }\n      return axios.post(this.state.endpoints.obtainJWT, payload);\n    },\n    refreshToken() {\n      const payload = {\n        token: this.state.jwt\n      }\n      axios.post(this.state.endpoints.refreshJWT, payload)\n        .then((response) => {\n          this.commit('updateToken', response.data.token)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    inspectToken() {\n      // WE WILL ADD THIS LATER\n      const token = this.state.jwt;\n      if (token) {\n        const decoded = jwt_decode(token);\n        const exp = decoded.exp\n        const orig_iat = decode.orig_iat\n        if (exp - (Date.now() / 1000) < 1800 && (Date.now() / 1000) - orig_iat < 628200) {\n          this.dispatch('refreshToken')\n        } else if (exp - (Date.now() / 1000) < 1800) {\n          // DO NOTHING, DO NOT REFRESH          \n        } else {\n          // PROMPT USER TO RE-LOGIN, THIS ELSE CLAUSE COVERS THE CONDITION WHERE A TOKEN IS EXPIRED AS WELL\n        }\n      }\n    }\n    // WE WILL ADD THIS LATER\n  }\n});\n\n// CommonJS\nVue.use(PaperDashboard);\n// Install BootstrapVue\nVue.use(BootstrapVue)\n// Optionally install the BootstrapVue icon components plugin\nVue.use(IconsPlugin)\nVue.use(CarouselPlugin)\nVue.use(Vuetify)\nVue.use(VueSession)\n\n\n/* eslint-disable no-new */\nnew Vue({\n  router,\n  render: h => h(App),\n  store: store\n}).$mount(\"#app\");\n"]}]}